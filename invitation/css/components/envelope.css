.env{
  width: min(704px, 100%);
  aspect-ratio: 16 / 11;
  position: relative;
  perspective: 1200px;
  border-radius: 24px;
  user-select:none;
  outline: none;
}

/* CLIPPED ENVELOPE BODY */
.env-clip{
  position:absolute;
  inset: 10% 0 0 0;
  border-radius: 22px;
  background: var(--env);
  border: 1.5px solid rgba(31,31,31,.25);
  box-shadow: var(--shadow);
  overflow:hidden;
  z-index: 1;
}

.env-clip::before{
  content:"";
  position:absolute;
  inset: 6px;
  border-radius: 18px;
  border: 1px solid rgba(31,31,31,.22);
  pointer-events:none;
}

.env-clip::after{
  content:"";
  position:absolute;
  inset:0;
  pointer-events:none;
  background:
    radial-gradient(520px 260px at 50% 20%, rgba(255,255,255,.55), rgba(255,255,255,0) 60%),
    linear-gradient(180deg, rgba(255,255,255,.25), rgba(255,255,255,0));
}

/* FOLDS */
.fold-left, .fold-right, .fold-bottom{
  display: none;
}

/* FLAP */
.flap{
  position:absolute;
  left:0; right:0;
  top: 10%;
  height: 44%;
  transform-origin: 50% 0%;
  transform: rotateX(0deg);
  transition: transform .85s cubic-bezier(.2,.8,.2,1);
  z-index: 5;
  filter: drop-shadow(0 10px 18px rgba(31,31,31,.10));
  backface-visibility: hidden;
  transform-style: preserve-3d;
  pointer-events:none;
}
.flap::before{
  content:"";
  position:absolute;
  inset:0;
  background: #E6DBC1;
  clip-path: polygon(0% 0%, 100% 0%, 50% 76%);
  border-top-left-radius: 18px;
  border-top-right-radius: 18px;
  border: 1.5px solid rgba(31,31,31,.35);
  border-bottom: none;
  box-shadow: inset 0 0 0 1px rgba(0,0,0,.2);
}
.flap::after{
  content:"";
  position:absolute;
  inset: 6px 10px 8px;
  border-radius: 14px 14px 0 0;
  border: 1px solid rgba(31,31,31,.30);
  border-bottom: none;
  clip-path: polygon(0% 0%, 100% 0%, 50% 76%);
  pointer-events:none;
}

/* LETTER */
.letter{
  position:absolute;
  left: 50%;
  bottom: 7%;
  width: 90%;
  height: 78%;
  background: var(--paper);
  border: 1px solid var(--border);
  border-radius: 18px;
  box-shadow: 0 16px 32px rgba(31,31,31,.10);
  overflow:hidden;
  transform: translateX(-50%) translateY(120%);
  opacity: 0;
  transition:
    transform .85s cubic-bezier(.2,.8,.2,1),
    opacity .5s ease;
  z-index: 3;
}

.letter-inner{
  height:100%;
  padding: 22px 22px 18px;
  overflow:auto;
  -webkit-overflow-scrolling: touch;
  overscroll-behavior: contain;
  opacity: 0;
  transform: translateY(16px);
  transition: opacity .55s ease, transform .65s ease;
}

.letter-inner::-webkit-scrollbar{ width: 10px; }
.letter-inner::-webkit-scrollbar-track{ background: rgba(31,31,31,.06); border-radius: 999px; }
.letter-inner::-webkit-scrollbar-thumb{ background: rgba(31,31,31,.18); border-radius: 999px; }
.letter-inner::-webkit-scrollbar-thumb:hover{ background: rgba(31,31,31,.24); }

.badge{
  display:inline-flex;
  align-items:center;
  justify-content:center;
  padding: 6px 12px;
  border-radius: 999px;
  border: 1px solid rgba(200,162,74,.55);
  background: var(--card);
  color: var(--text);
  font-weight: 600;
  letter-spacing:.02em;
  font-size: clamp(11px, 1.1vw, 12px);
}

.seal{
  position:absolute;
  top: 12px;
  right: 12px;
  width: 44px;
  height: 44px;
  border-radius: 999px;
  font-family:"Playfair Display", Georgia, serif;
  font-weight: 700;
  box-shadow: 0 10px 20px rgba(31,31,31,.08);
}

.letter h3{
  margin: 0 0 10px;
  font-family:"Playfair Display", Georgia, serif;
  font-size: clamp(20px, 2.6vw, 24px);
  font-weight: 600;
  padding-right: 62px;
}

.grid{
  display:grid;
  grid-template-columns: 1fr;
  gap: 14px;
  margin-top: 14px;
}
@media (min-width: 560px){
  .grid{ grid-template-columns: 1fr 1fr; }
}

.mini{
  background: rgba(250,249,246,.95);
  border: 1px solid var(--border);
  border-radius: 16px;
  padding: 14px;
  box-shadow: 0 8px 20px rgba(31,31,31,.06);
}
.mini strong{
  display:block;
  font-size: clamp(13px, 1.2vw, 14px);
  margin-bottom: 6px;
  letter-spacing:.04em;
  text-transform: uppercase;
  color: #2F2A22;
}
.mini a{
  color: var(--text);
  text-decoration:none;
  border-bottom: 1px solid rgba(200,162,74,.65);
}
.mini a:hover{ border-bottom-color: rgba(200,162,74,1); }

.divider{
  width: 64px;
  height: 1px;
  background: rgba(200,162,74,.55);
  border-radius: 999px;
  margin: 10px 0 12px;
}

/* OPEN STATE */
.env.is-open .flap{
  transform: rotateX(-180deg);
}
.env.is-open .letter{
  transform: translateX(-50%) translateY(-6%);
  opacity: 1;
  transition:
    transform .85s cubic-bezier(.2,.8,.2,1),
    opacity .2s ease;
}
.env.is-open .letter-inner{
  opacity: 1;
  transform: translateY(0);
  transition-delay: .2s;
}

@media (max-width: 600px){
  .env{
    width: 100%;
    aspect-ratio: 4 / 3.2;
  }

  .env-clip{
    inset: 8% 0 0 0;
    border-radius: 18px;
  }

  .letter{
    bottom: 4%;
    height: 86%;
    width: 92%;
    border-radius: 16px;
  }

  .letter-inner{
    padding: 16px 14px 12px;
  }

  .env.is-open .letter{
    transform: translateX(-50%) translateY(-10%);
  }
}
